연습)
2021년 11월 3일에서 11월 7일 사이에 판매된 모든 도서의 도서명, 출판사명, 도서가격, 판매가격, 판매일을 출력
```
select bookname, publisher, price, saleprice, orderdate
from book, orders
where book.bookid = orders.bookid and 
orderdate between '2021/11/03' and '2021/11/07';
```
위와같이 조회하고자 하는 데이터(칼럼)이 두개이상의 테이블에 있다면 join을 이용함
# join 하는 방법
```
select 컬럼1, 컬럼2, ...
	from 테이블, 테이블2, ... 
	where 조인식 and
	 조건식1 .....
```
**join식은 두개의 테이블에 공통으로 들어가는 칼럼을 조건식으로 표현하는 것을 말함 **

연습) 2021년 11월 3일에서 11월 7일 사이에 판매된 모든 도서의 도서번호,도서명,출판사명, 도서가격, 판매가격, 판매일을 출력
```
SQL> select bookid, bookname, publisher, price, saleprice, orderdate
  2  from book, orders
  3  where book.bookid = orders.bookid and
  4  orderdate between '2021/11/03' and '2021/11/07';
select bookid, bookname, publisher, price, saleprice, orderdate
       *
1행에 오류:
ORA-00918: 열의 정의가 애매합니다
```
bookname, publisher, pirce 컬럼은 book테이블에만 있음 

그리고 saleprice, orderdate는 orders 테이블에만 있음 

조인을 할 때에는 두개의 테이블중에 한곳에만 있는 컬럼은 컬럼이름만 써도 되지만 

bookid처럼 양쪽의 테이블에 모두 있는 경우에는 둘 중에 아무나 테이블 이름을 같이 써줘야 함
```
select book.bookid, bookname, publisher, price, saleprice, orderdate
from book, orders
where book.bookid = orders.bookid and 
orderdate between '2021/11/03' and '2021/11/07';
```
**테이블이름에 애칭을 줄 수있음**

연습) 2021년 11월 3일에서 11월 7일 사이에 판매된 모든 도서의 도서번호,도서명,출판사명, 도서가격, 판매가격, 판매일을 출력
```
select b.bookid, bookname, publisher, price, saleprice, orderdate
from book b, orders o
where b.bookid = o.bookid and 
orderdate between '2021/11/03' and '2021/11/07';
```
연습) '박지성'고객이 주문한 도서의 정보에 대하여 고객번호,고객명,도서명,출판사명,도서가격,구매금액,구매일을 출력하시오 단, 도서가격이 높은 순으로 출력함
```
select o.custid, name, bookname, publisher, price, saleprice, orderdate 
from book b, orders o , customer c
where 
o.custid = c.custid and b.bookid = o. bookid and 
c.name = '박지성' 
order by price desc;
```
연습)

'이상미디어'의 도서를 구매한 모든 고객의 정보를 출력하시오 고객번호, 고객이름, 도서명, 도서가격, 구매가격, 구매일 
단, 구매일을 최근순으로 출력함 구매일이 동일할 때에는 구매 가격이 높은 순으로 출력함
```
select c.custid, name, bookname, price, saleprice, orderdate 
from book b, orders o, customer c
where c.custid = o.custid and 
b.bookid = o.bookid and
b.publisher = '이상미디어' 
order by orderdate desc , saleprice desc;
```
연습)

'이상미디어'나 '대한미디어'나 '굿스포츠'에서 출간한 도서중에 가격이 10000원에서 30000원 사이의 도서를 2021년 11월 3일과 2021년 11월 7일 사이에 구매한 고객의 정보를 출력
고객번호, 고객이름, 도서번호, 도서명 ,출판사명, 도서가격, 구매일을 출력함 단, 출판사 순으로 출력하고 동일할 때에는 도서명 순으로 출력
```
select c.custid, name, b.bookid, bookname, publisher, price, orderdate 
from book b, orders o, customer c
where c.custid = o.custid and 
b.bookid = o.bookid and
publisher in ('이상미디어','대한미디어','굿스포츠') and 
price between 10000 and 30000 and 
orderdate between '2021/11/03' and '2021/11/07' 
order by publisher , bookname ;
```
연습)

축구 관련 도서를 구매한 고객의 정보를 출력 고객번호, 고객명, 도서명, 출판사명, 구매일, 도서가격, 구매가격 단 출판사 순으로 입력
```
select c.custid, name, bookname, publisher, orderdate, price, saleprice 
from book b, orders o , customer c
where c.custid = o.custid and
b.bookid = o.bookid and
bookname like '%축구%'
order by publisher;
```
연습)
대한민국에 거주하는 고객의 이름과 주소 전화번호를 검색
```
select name, address, phone from customer
where address like '대한민국%';
```
연습)
대한민국에 거주하는 고객이 주문한 도서명을 출력
단 도서명은 중복되지 않도록 출력
```
select distinct b.bookname 
from book b, customer c, orders o
where b.bookid = o.bookid and
o.custid = c.custid and
address like '대한민국%';
```
연습)
'굿스포츠'출판사의 도서를 구매한 고객의 이름을 출력
단, 고객이름은 중복되지 않도록 함 
**중복되지 않기 위해서 distinct 사용**
```
select distinct name 
from book b, customer c, orders o
where b.bookid = o.bookid and
o.custid = c.custid and
publisher = '굿스포츠';
```
**sql문은 명령어에 대소문자를 구별하지 않지만  value는 대소문자를 구별함**
```
select bookname , price from book;
BOOKNAME          PRICE
-------------------- --------
축구의 역사             7,000
축구아는 여자          13,000
축구의 이해            22,000
골프 바이블            35,000
피겨 교본               8,000
역도 단계별 기술        6,000
야구의 추억            20,000
야구를 부탁해          13,000
올림픽 이야기           7,500
Olymphic Champions     13,000
재미있는 축구          17,000
이기는 축구기술        20,000
12 행이 선택되었습니다.
```
**검색할때 컬럼의 순서를 바꿀 수 있음!!!!**
```
select price, bookname from book;
   PRICE BOOKNAME
-------- --------------------
   7,000 축구의 역사
  13,000 축구아는 여자
  22,000 축구의 이해
  35,000 골프 바이블
   8,000 피겨 교본
   6,000 역도 단계별 기술
  20,000 야구의 추억
  13,000 야구를 부탁해
   7,500 올림픽 이야기
  13,000 Olymphic Champions
  17,000 재미있는 축구
  20,000 이기는 축구기술
12 행이 선택되었습니다.
```
jdbc 연결 프로그래밍을 할 때에는 실행한 sql의 인덱스를 기준으로 따짐
```
select bookid, bookname, publisher, price from book;
= select * from book;
```
```
BOOKID BOOKNAME    PUBLISHER  PRICE
------ -------------------- ----------  --------
     1 축구의 역사          굿스포츠      7,000
     2 축구아는 여자        나무수       13,000
     3 축구의 이해          대한미디어   22,000
     4 골프 바이블          대한미디어   35,000
     5 피겨 교본            굿스포츠      8,000
     6 역도 단계별 기술     굿스포츠      6,000
     7 야구의 추억          이상미디어   20,000
     8 야구를 부탁해        이상미디어   13,000
     9 올림픽 이야기        삼성당        7,500
    10 Olymphic Champions   Pearson      13,000
    11 재미있는 축구        쌍용미디어   17,000
    12 이기는 축구기술      굿스포츠     20,000
12 행이 선택되었습니다.
```
연습) 도서테이블에 있는 모든 출판사를 검색
`select publisher from book;`
```
PUBLISHER
----------
굿스포츠
나무수
대한미디어
대한미디어
굿스포츠
굿스포츠
이상미디어
이상미디어
삼성당
Pearson
쌍용미디어
굿스포츠
12 행이 선택되었습니다.
```
**중복 제거**
`select distinct publisher from book;`
```
PUBLISHER
----------
굿스포츠
나무수
대한미디어
이상미디어
삼성당
Pearson
쌍용미디어
7 행이 선택되었습니다.
```
연습)가격이 20000미만인 도서를 검색

`select * from book where price < 20000;`
```
BOOKID BOOKNAME             PUBLISHER     PRICE
------ -------------------- ---------- --------
     1 축구의 역사          굿스포츠      7,000
     2 축구아는 여자        나무수       13,000
     5 피겨 교본            굿스포츠      8,000
     6 역도 단계별 기술     굿스포츠      6,000
     8 야구를 부탁해        이상미디어   13,000
     9 올림픽 이야기        삼성당        7,500
    10 Olymphic Champions   Pearson      13,000
    11 재미있는 축구        쌍용미디어   17,000

8 행이 선택되었습니다.
```
연습)가격이 10000원 이상 20000원 이하인 도서를 검색
```
select * from book where price between 10000 and 20000;
= select * from book where price >= 10000 and price<= 20000;
```
```
BOOKID BOOKNAME             PUBLISHER     PRICE
------ -------------------- ---------- --------
     2 축구아는 여자        나무수       13,000
     7 야구의 추억          이상미디어   20,000
     8 야구를 부탁해        이상미디어   13,000
    10 Olymphic Champions   Pearson      13,000
    11 재미있는 축구        쌍용미디어   17,000
    12 이기는 축구기술      굿스포츠     20,000
6 행이 선택되었습니다.
```
연습) 출판사가 '굿스포츠' 혹은 '대한미디어'인 도서를 검색
```
select * from book where publisher in ('굿스포츠','대한미디어'); 
= select * from book where publisher = '굿스포츠' or publisher = '대한미디어';
```
```
BOOKID BOOKNAME             PUBLISHER     PRICE
------ -------------------- ---------- --------
     1 축구의 역사          굿스포츠      7,000
     3 축구의 이해          대한미디어   22,000
     4 골프 바이블          대한미디어   35,000
     5 피겨 교본            굿스포츠      8,000
     6 역도 단계별 기술     굿스포츠      6,000
    12 이기는 축구기술      굿스포츠     20,000

6 행이 선택되었습니다.
```
연습) 출판사가 '굿스포츠' 혹은 '대한미디어'가 아닌 도서를 검색
```
select * from book where publisher not in ('굿스포츠', '대한미디어');
= select * from book where publisher != '굿스포츠' or publisher != '대한미디어';
= select * from book where publisher <> '굿스포츠' or publisher <> '대한미디어';
```
연습) 도서이름에 "축구"가 포함된 출판사를 검색
```
select bookname, publisher from book
where bookname like '%축구%'; 
```
연습) 도서이름에 왼쪽 두번째 위치에 "구"라는 문자열을 갖는 도서를 검색
`select * from book where bookname like '_구%';`
```
BOOKID BOOKNAME             PUBLISHER     PRICE
------ -------------------- ---------- --------
     1 축구의 역사          굿스포츠      7,000
     2 축구아는 여자        나무수       13,000
     3 축구의 이해          대한미디어   22,000
     7 야구의 추억          이상미디어   20,000
     8 야구를 부탁해        이상미디어   13,000
```
연습) "축구"에 관한 도서중에 가격이 20000원 이상인 도서를 검색
```
select * from book 
where bookname like '%축구%' and 
price >= 20000;
```
```
BOOKID BOOKNAME             PUBLISHER     PRICE
------ -------------------- ---------- --------
     3 축구의 이해          대한미디어   22,000
    12 이기는 축구기술      굿스포츠     20,000
```
연습) 출판사가 '굿스포츠' 혹은 '대한미디어'인 도서를 검색
```
select * from book 
where publisher = '굿스포츠' or publisher = '대한미디어';
=select * from book 
where publisher in ('굿스포츠', '대한미디어');
```
```
BOOKID BOOKNAME             PUBLISHER     PRICE
------ -------------------- ---------- --------
     1 축구의 역사          굿스포츠      7,000
     3 축구의 이해          대한미디어   22,000
     4 골프 바이블          대한미디어   35,000
     5 피겨 교본            굿스포츠      8,000
     6 역도 단계별 기술     굿스포츠      6,000
    12 이기는 축구기술      굿스포츠     20,000
6 행이 선택되었습니다.
```
연습) 도서를 이름순으로 검색
`select * from book order by bookname;`
```
BOOKID BOOKNAME             PUBLISHER     PRICE
------ -------------------- ---------- --------
    10 Olymphic Champions   Pearson      13,000
     4 골프 바이블          대한미디어   35,000
     8 야구를 부탁해        이상미디어   13,000
     7 야구의 추억          이상미디어   20,000
     6 역도 단계별 기술     굿스포츠      6,000
     9 올림픽 이야기        삼성당        7,500
    12 이기는 축구기술      굿스포츠     20,000
    11 재미있는 축구        쌍용미디어   17,000
     2 축구아는 여자        나무수       13,000
     1 축구의 역사          굿스포츠      7,000
     3 축구의 이해          대한미디어   22,000
     5 피겨 교본            굿스포츠      8,000
12 행이 선택되었습니다.
```
연습) 도서를 가격순으로 검색하고, 가격이 같으면 이름순으로 검색
`select * from book order by price, bookname;`
```
BOOKID BOOKNAME             PUBLISHER     PRICE
------ -------------------- ---------- --------
     6 역도 단계별 기술     굿스포츠      6,000
     1 축구의 역사          굿스포츠      7,000
     9 올림픽 이야기        삼성당        7,500
     5 피겨 교본            굿스포츠      8,000
    10 Olymphic Champions   Pearson      13,000
     8 야구를 부탁해        이상미디어   13,000
     2 축구아는 여자        나무수       13,000
    11 재미있는 축구        쌍용미디어   17,000
     7 야구의 추억          이상미디어   20,000
    12 이기는 축구기술      굿스포츠     20,000
     3 축구의 이해          대한미디어   22,000
     4 골프 바이블          대한미디어   35,000
12 행이 선택되었습니다.
```


```
BOOKID BOOKNAME             PUBLISHER     PRICE
------ -------------------- ---------- --------
     2 축구아는 여자        나무수       13,000
     7 야구의 추억          이상미디어   20,000
     8 야구를 부탁해        이상미디어   13,000
     9 올림픽 이야기        삼성당        7,500
    10 Olymphic Champions   Pearson      13,000
    11 재미있는 축구        쌍용미디어   17,000

6 행이 선택되었습니다.
```
연습)'김연아'와 '박지성'이 아닌 고객이 주문한 도서의 정보를 출력
고객명, 도서명, 고객번호, 구매일
```
select name, bookname, c.custid, orderdate 
from book b , customer c , orders o
where name not in ('김연아','박지성') and
c.custid = o.custid and
b.bookid = o.bookid;
```
연습) 도서이름에 "축구"가 포함된 출판사를 검색
```
select bookname, publisher from book
where bookname like '%축구%'; 
```
연습) 도서이름에 왼쪽 두번째 위치에 "구"라는 문자열을 갖는 도서를 검색
`select * from book where bookname like '_구%';`
```
BOOKID BOOKNAME             PUBLISHER     PRICE
------ -------------------- ---------- --------
     1 축구의 역사          굿스포츠      7,000
     2 축구아는 여자        나무수       13,000
     3 축구의 이해          대한미디어   22,000
     7 야구의 추억          이상미디어   20,000
     8 야구를 부탁해        이상미디어   13,000
```
연습) "축구"에 관한 도서중에 가격이 20000원 이상인 도서를 검색
```
select * from book 
where bookname like '%축구%' and 
price >= 20000;
```
```
BOOKID BOOKNAME             PUBLISHER     PRICE
------ -------------------- ---------- --------
     3 축구의 이해          대한미디어   22,000
    12 이기는 축구기술      굿스포츠     20,000
```
연습) 출판사가 '굿스포츠' 혹은 '대한미디어'인 도서를 검색
```
select * from book 
where publisher = '굿스포츠' or publisher = '대한미디어';
=select * from book 
where publisher in ('굿스포츠', '대한미디어');
```
```
BOOKID BOOKNAME             PUBLISHER     PRICE
------ -------------------- ---------- --------
     1 축구의 역사          굿스포츠      7,000
     3 축구의 이해          대한미디어   22,000
     4 골프 바이블          대한미디어   35,000
     5 피겨 교본            굿스포츠      8,000
     6 역도 단계별 기술     굿스포츠      6,000
    12 이기는 축구기술      굿스포츠     20,000
6 행이 선택되었습니다.
```
연습) 도서를 이름순으로 검색
`select * from book order by bookname;`
```
BOOKID BOOKNAME             PUBLISHER     PRICE
------ -------------------- ---------- --------
    10 Olymphic Champions   Pearson      13,000
     4 골프 바이블          대한미디어   35,000
     8 야구를 부탁해        이상미디어   13,000
     7 야구의 추억          이상미디어   20,000
     6 역도 단계별 기술     굿스포츠      6,000
     9 올림픽 이야기        삼성당        7,500
    12 이기는 축구기술      굿스포츠     20,000
    11 재미있는 축구        쌍용미디어   17,000
     2 축구아는 여자        나무수       13,000
     1 축구의 역사          굿스포츠      7,000
     3 축구의 이해          대한미디어   22,000
     5 피겨 교본            굿스포츠      8,000
12 행이 선택되었습니다.
```
연습) 도서를 가격순으로 검색하고, 가격이 같으면 이름순으로 검색
`select * from book order by price, bookname;`
```
BOOKID BOOKNAME             PUBLISHER     PRICE
------ -------------------- ---------- --------
     6 역도 단계별 기술     굿스포츠      6,000
     1 축구의 역사          굿스포츠      7,000
     9 올림픽 이야기        삼성당        7,500
     5 피겨 교본            굿스포츠      8,000
    10 Olymphic Champions   Pearson      13,000
     8 야구를 부탁해        이상미디어   13,000
     2 축구아는 여자        나무수       13,000
    11 재미있는 축구        쌍용미디어   17,000
     7 야구의 추억          이상미디어   20,000
    12 이기는 축구기술      굿스포츠     20,000
     3 축구의 이해          대한미디어   22,000
     4 골프 바이블          대한미디어   35,000
12 행이 선택되었습니다.
```

